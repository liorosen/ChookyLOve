<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>I Love You Chooky</title>
    <link rel="stylesheet" href="css/love.css">
</head>

<body>

    <audio autoplay loop id="audios" preload="auto">
        <source src="music/Kiss - I Was Made For Lovin' You.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <div id="heart" class="love">
            <div class="block">
                <div class="div1"></div>
                <div class="div2"></div>
                <div class="div3"></div>
                <div class="div4"></div>
            </div>
        </div>

        <div id="sleeping-gif">
            <img id="sleeping" src="images/sleeping.gif" />
        </div>

        <div id="love-text">I Love You Chooky</div>
    </div>

    <script src="js/love.js"></script>
    <script>
        const audio = document.getElementById('audios');
        window.addEventListener('click', function() {
            audio.play();
        });

        window.onload = function () {
            document.getElementById('heart').style.display = 'none';
            document.getElementById('love-text').style.display = 'none';

            setTimeout(() => {
                document.getElementById('sleeping-gif').style.display = 'none';
                document.getElementById('heart').style.display = 'block';

                // Start drawing heart
                timer = setInterval(() => {
                    Next();
                }, 300);

            }, 5000); // Adjust this timing depending on how long your sleeping GIF is
        };

        let finishedHeart = false;
        function Rise() {
            console.log("Start rising");

            let timer2 = null, distance = 0;
            const target = 120, speed = 1;
            let love_top = parseFloat(window.getComputedStyle(love, null).top.slice(0, -2));

            timer2 = setInterval(() => {
                distance += speed;
                if (distance >= target) {
                    clearInterval(timer2);
                    console.log("Rise finished");

                    // After heart rise completed, show text
                    document.getElementById('love-text').style.display = 'block';
                }

                love.style.top = (love_top - distance) + "px";
            }, 22);
        }
    </script>

</body>
</html>
